---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import CTAButton from './CTAButton.astro';

interface Props {
  imageSrc: ImageMetadata;
  imageAlt: string;
  country: string;
  description: string;
  overlayColor: 'terracotta' | 'sauge';
  learnMoreHref?: string;
}

const {
  imageSrc,
  imageAlt,
  country,
  description,
  overlayColor,
  learnMoreHref,
} = Astro.props;

const overlayClass =
  overlayColor === 'terracotta' ? 'bg-terracotta/55' : 'bg-sauge/55';
const headingId = `heading-${country.toLowerCase().replace(/\s+/g, '-')}`;
---

<section
  aria-labelledby={headingId}
  class="relative min-h-[50vh] overflow-hidden"
>
  <Image
    src={imageSrc}
    alt={imageAlt}
    widths={[768, 1440, 2880]}
    sizes="100vw"
    loading="lazy"
    decoding="async"
    class="absolute inset-0 w-full h-full object-cover"
  />
  <div class:list={['absolute inset-0', overlayClass]}></div>
  <div
    class="relative z-10 flex flex-col justify-center items-center h-full min-h-[50vh] text-center px-6"
  >
    <h2
      id={headingId}
      class="font-serif text-4xl md:text-5xl lg:text-6xl text-white mb-4"
    >
      {country}
    </h2>
    <p
      class:list={[
        'font-sans text-white/90 text-lg md:text-xl max-w-2xl leading-relaxed',
        learnMoreHref && 'mb-6',
      ]}
    >
      {description}
    </p>
    {
      learnMoreHref && (
        <CTAButton href={learnMoreHref} variant="ghost" text="En savoir plus" />
      )
    }
  </div>
</section>
